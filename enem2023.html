<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prova Enem 2023 - QuizzGame</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    
    <!-- Font Awesome para Ã­cones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a0033 0%, #330066 25%, #4d0099 50%, #6600cc 75%, #8000ff 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20% 30%, white, transparent),
                radial-gradient(2px 2px at 60% 70%, white, transparent),
                radial-gradient(1px 1px at 50% 50%, white, transparent);
            background-size: 200px 200px;
            animation: stars 20s linear infinite;
            z-index: -1;
        }

        @keyframes stars {
            from { transform: translateY(0); }
            to { transform: translateY(-200px); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .header {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            color: white;
            font-size: 2em;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .back-btn {
            background: linear-gradient(45deg, #ff00ff, #8000ff);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .back-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 0, 255, 0.5);
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            height: 10px;
            border-radius: 5px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(45deg, #ff00ff, #8000ff);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            background: linear-gradient(45deg, #ff00ff, #8000ff);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .question-area {
            color: white;
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .question-image {
            max-width: 100%;
            margin: 20px 0;
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .options-container {
            display: grid;
            gap: 15px;
        }

        .option {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(10px);
        }

        .option.selected {
            background: rgba(255, 0, 255, 0.3);
            border-color: #ff00ff;
        }

        .option.correct {
            background: rgba(0, 255, 0, 0.3);
            border-color: #00ff00;
        }

        .option.incorrect {
            background: rgba(255, 0, 0, 0.3);
            border-color: #ff0000;
        }

        .option-letter {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-btn {
            background: linear-gradient(45deg, #ff00ff, #8000ff);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 0, 255, 0.5);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .timer {
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .results-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .results-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            text-align: center;
        }

        .results-content h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #ffd700;
        }

        .results-content p {
            font-size: 1.3em;
            margin-bottom: 30px;
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #ff00ff;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            margin-top: 5px;
        }

        .section-selector {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .section-selector h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .section-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .section-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .section-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .section-btn.active {
            background: linear-gradient(45deg, #ff00ff, #8000ff);
            border-color: #ff00ff;
        }

        .coins-display {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 215, 0, 0.2);
            padding: 10px 20px;
            border-radius: 20px;
            color: #ffd700;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 999;
        }

        .coins-display i {
            font-size: 1.5em;
        }

        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 15px 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            z-index: 3000;
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(-50%) translateY(0);
        }

        .review-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2001;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
        }

        .review-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .review-header h2 {
            font-size: 2em;
            color: #ffd700;
        }

        .close-review {
            background: none;
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .close-review:hover {
            transform: rotate(90deg);
        }

        .review-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .review-tab {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .review-tab:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .review-tab.active {
            background: linear-gradient(45deg, #ff00ff, #8000ff);
            border-color: #ff00ff;
        }

        .review-questions {
            display: grid;
            gap: 20px;
        }

        .review-question {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .review-question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .review-question-number {
            background: linear-gradient(45deg, #ff00ff, #8000ff);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .review-status {
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .review-status.correct {
            background: rgba(0, 255, 0, 0.3);
            color: #00ff00;
        }

        .review-status.incorrect {
            background: rgba(255, 0, 0, 0.3);
            color: #ff0000;
        }

        .review-question-text {
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .review-answer {
            margin: 10px 0;
            padding: 10px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
        }

        .review-answer.user-answer {
            border-left: 4px solid #ff00ff;
        }

        .review-answer.correct-answer {
            border-left: 4px solid #00ff00;
        }

        .review-answer-label {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .confirm-dialog {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            text-align: center;
        }

        .confirm-dialog h3 {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #ffd700;
        }

        .confirm-dialog p {
            font-size: 1.1em;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .confirm-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .confirm-btn {
            background: linear-gradient(45deg, #ff00ff, #8000ff);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .confirm-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 0, 255, 0.5);
        }

        .confirm-btn.secondary {
            background: rgba(255, 255, 255, 0.2);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .section-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .results-stats {
                grid-template-columns: 1fr;
            }
            
            .review-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .confirm-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="coins-display">
        <i class="fas fa-coins"></i>
        <span id="coinsCount">0</span> Moedas
    </div>

    <div class="container">
        <div class="header">
            <h1><i class="fas fa-graduation-cap"></i> Prova Enem 2023</h1>
            <button class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-left"></i> Voltar
            </button>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="section-selector">
            <h3>Selecione a SeÃ§Ã£o da Prova:</h3>
            <div class="section-buttons">
                <button class="section-btn active" onclick="selectSection('linguagens')">
                    <i class="fas fa-language"></i> Linguagens (InglÃªs)
                </button>
                <button class="section-btn" onclick="selectSection('humanas')">
                    <i class="fas fa-globe"></i> CiÃªncias Humanas
                </button>
                <button class="section-btn" onclick="selectSection('matematica')">
                    <i class="fas fa-calculator"></i> MatemÃ¡tica
                </button>
                <button class="section-btn" onclick="selectSection('portugues')">
                    <i class="fas fa-book"></i> PortuguÃªs
                </button>
            </div>
        </div>

        <div id="questionContainer" class="question-container">
            <!-- As questÃµes serÃ£o carregadas aqui dinamicamente -->
        </div>

        <div class="navigation">
            <button class="nav-btn" id="prevBtn" onclick="previousQuestion()" disabled>
                <i class="fas fa-chevron-left"></i> Anterior
            </button>
            <div class="timer">
                <i class="fas fa-clock"></i>
                <span id="timer">00:00</span>
            </div>
            <button class="nav-btn" id="nextBtn" onclick="nextQuestion()">
                PrÃ³xima <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <!-- Modal de ConfirmaÃ§Ã£o -->
    <div id="confirmModal" class="results-modal">
        <div class="confirm-dialog">
            <h3>Deseja revisar suas respostas?</h3>
            <p>VocÃª pode ver quais questÃµes acertou e errou antes de finalizar definitivamente.</p>
            <div class="confirm-buttons">
                <button class="confirm-btn" onclick="showReview()">
                    <i class="fas fa-eye"></i> Sim, quero revisar
                </button>
                <button class="confirm-btn secondary" onclick="finishExam()">
                    <i class="fas fa-check"></i> NÃ£o, finalizar agora
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Resultados -->
    <div id="resultsModal" class="results-modal">
        <div class="results-content">
            <h2>Prova ConcluÃ­da!</h2>
            <p>ParabÃ©ns por finalizar a prova do Enem 2023!</p>
            
            <div class="results-stats">
                <div class="stat-card">
                    <div class="stat-value" id="correctCount">0</div>
                    <div class="stat-label">Respostas Corretas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalCount">0</div>
                    <div class="stat-label">Total de QuestÃµes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="percentScore">0%</div>
                    <div class="stat-label">Percentual</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="coinsEarned">0</div>
                    <div class="stat-label">Moedas Ganhas</div>
                </div>
            </div>
            
            <button class="nav-btn" onclick="closeResults()">
                <i class="fas fa-check"></i> Continuar
            </button>
        </div>
    </div>

    <!-- Modal de RevisÃ£o -->
    <div id="reviewModal" class="review-modal">
        <div class="review-content">
            <div class="review-header">
                <h2>RevisÃ£o de Respostas</h2>
                <button class="close-review" onclick="closeReview()">&times;</button>
            </div>
            
            <div class="review-tabs">
                <button class="review-tab active" onclick="showReviewTab('correct')">
                    <i class="fas fa-check-circle"></i> Acertos (<span id="correctCountTab">0</span>)
                </button>
                <button class="review-tab" onclick="showReviewTab('incorrect')">
                    <i class="fas fa-times-circle"></i> Erros (<span id="incorrectCountTab">0</span>)
                </button>
            </div>
            
            <div id="reviewQuestions" class="review-questions">
                <!-- QuestÃµes serÃ£o carregadas aqui -->
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="nav-btn" onclick="closeReviewAndFinish()">
                    <i class="fas fa-check"></i> Finalizar Prova
                </button>
            </div>
        </div>
    </div>

    <!-- NotificaÃ§Ã£o -->
    <div id="notification" class="notification"></div>

    <script>
        // ConfiguraÃ§Ã£o do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyA4p1jeIMrQT4pI1p3fLO8OBRdveK0eQCg",
            authDomain: "quizzgame-9c5ee.firebaseapp.com",
            projectId: "quizzgame-9c5ee",
            storageBucket: "quizzgame-9c5ee.firebasestorage.app",
            messagingSenderId: "328947922360",
            appId: "1:328947922360:web:45adf0edf995813bce4b4d"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Dados da prova Enem 2023
        const examData = {
            linguagens: [
                {
                    number: 1,
                    question: "The average american tosses 300 pounds of food each year, making food the number one contributor to America's landfills. Eat your leftovers and keep your perishables in the fridge â the Earth is counting on it.",
                    image: null,
                    options: [
                        "A) os lixÃµes precisam de ampliaÃ§Ã£o.",
                        "B) o desperdÃ­cio degrada o ambiente.",
                        "C) os mercados doam alimentos perecÃ­veis.",
                        "D) a desnutriÃ§Ã£o compromete o raciocÃ­nio.",
                        "E) as residÃªncias carecem de refrigeradores."
                    ],
                    correct: 1
                },
                {
                    number: 2,
                    question: "No man is an island,\nEntire of itself;\nEvery man is a piece of the continent,\nA part of the main.\n[...]\nAny man's death diminishes me,\nBecause I am involved in mankind.",
                    image: null,
                    options: [
                        "A) medo da morte.",
                        "B) ideia de conexÃ£o.",
                        "C) conceito de solidÃ£o.",
                        "D) risco de devastaÃ§Ã£o.",
                        "E) necessidade de empatia."
                    ],
                    correct: 1
                },
                {
                    number: 3,
                    question: "Things We Carry on the Sea\nWe carry tears in our eyes: good-bye father, good-bye [mother\nWe carry soil in small bags: may home never fade in our [hearts\nWe carry carnage of mining, droughts, floods, genocides\nWe carry dust of our families and neighbors incinerated [in mushroom clouds\nWe carry our islands sinking under the sea\nWe carry our hands, feet, bones, hearts and best minds [for a new life\nWe carry diplomas: medicine, engineer, nurse, [education, math, poetry, even if they mean [nothing to the other shore\nWe carry railroads, plantations, laundromats, [bodegas, taco trucks, farms, factories, nursing [homes, hospitals, schools, temples... built on [our ancestors' backs\nWe carry old homes along the spine, new dreams in our [chests\nWe carry yesterday, today and tomorrow\nWe're orphans of the wars forced upon us\nWe're refugees of the sea rising from industrial wastes\nAnd we carry our mother tongues",
                    image: null,
                    options: [
                        "A) risco de choques culturais.",
                        "B) impacto do ensino de histÃ³ria.",
                        "C) importÃ¢ncia da luta ambiental.",
                        "D) existÃªncia de experiÃªncias plurais.",
                        "E) necessidade de capacitaÃ§Ã£o profissional."
                    ],
                    correct: 3
                },
                {
                    number: 4,
                    question: "Spanglish\npues estoy creando Spanglish\nbi-cultural systems\nscientific lexicographical\ninter-textual integrations\ntwo expressions\nexistentially wired\ntwo dominant languages\ncontinentally abrazÃ¡ndose\nin colloquial combate\nimperio spanglish emerges\nsobre territorio bi-lingual\nlas novelas mexicanas\nmixing with radiorocknroll\nimmigrant/migrant\nnasal mispronouncements\nhip-hop, street salsa, spanish pop\nstandard english classroom\nwith computer technicalities\nspanglish is literally perfect",
                    image: null,
                    options: [
                        "A) convergÃªncia linguÃ­stico-cultural.",
                        "B) caracterÃ­stica histÃ³rico-cultural.",
                        "C) tendÃªncia estilÃ­stico-literÃ¡ria.",
                        "D) discriminaÃ§Ã£o cultural.",
                        "E) censura musical."
                    ],
                    correct: 0
                },
                {
                    number: 5,
                    question: "\"Oh, you'll love working here. Nobody treats you any differently just because of your age, race, or gender.\"",
                    image: null,
                    options: [
                        "A) criticar um padrÃ£o de vestimenta.",
                        "B) destacar a falta de diversidade.",
                        "C) indicar um modo de interaÃ§Ã£o.",
                        "D) elogiar um modelo de organizaÃ§Ã£o.",
                        "E) salientar o espÃ­rito de cooperaÃ§Ã£o."
                    ],
                    correct: 1
                }
            ],
            humanas: [
                {
                    number: 6,
                    question: "A sessÃ£o do ComitÃª OlÃ­mpico Internacional (COI) aprovou uma mudanÃ§a histÃ³rica e inÃ©dita no lema olÃ­mpico, criado em 1894 pelo BarÃ£o Pierre de Coubertin para expressar os valores e a excelÃªncia do esporte. Mais de 120 anos depois, o lema tem sua primeira alteraÃ§Ã£o para ressaltar a solidariedade e incluir a palavra \"juntos\": mais rÃ¡pido, mais alto, mais forte â juntos. A mudanÃ§a foi aprovada por unanimidade pelos membros do COI e celebrada pelo presidente da entidade.",
                    image: null,
                    options: [
                        "A) unificaÃ§Ã£o do lema anterior ao atual.",
                        "B) aproximaÃ§Ã£o entre o lema olÃ­mpico e o COI.",
                        "C) junÃ§Ã£o do lema olÃ­mpico com os princÃ­pios esportivos.",
                        "D) associaÃ§Ã£o entre o lema olÃ­mpico e a cooperatividade.",
                        "E) vinculaÃ§Ã£o entre o lema olÃ­mpico e os eventos atlÃ©ticos."
                    ],
                    correct: 3
                },
                {
                    number: 7,
                    question: "Mais iluminada que outras\nTenho dois seios, estas duas coxas, duas mÃ£os que me sÃ£o muito Ãºteis, olhos escuros, estas duas sobrancelhas que preencho com maquiagem comprada por dezenove e noventa e orelhas que nÃ£o aceitam bijuterias. Este corpo Ã© um corpo faminto, dentado, cruel, capaz e violento. Movo os braÃ§os e multidÃµes correm desesperadas. Caminho no escuro com o rosto para baixo, pois cada parte isolada de mim tem sua prÃ³pria vida e nÃ£o quero domÃ¡-las. Animal da caatinga. Forte demais. Engolidora de espadas e espinhos.\nDizem e eu ouvi, mas depois tambÃ©m li, que o estado do CearÃ¡ aboliu a escravidÃ£o quatro anos antes do restante do paÃ­s. Todos aqueles corpos que eram trazidos com seus dedos contados, seus calcanhares prontos e seus umbigos em fogo, todos eles foram interrompidos no porto. Um homem â dizem e eu ouvi e depois tambÃ©m li â liderou o levante. E todos esses corpos foram buscar outros incÃ´modos. Foram ser incomodados.",
                    image: null,
                    options: [
                        "A) revelam as marcas da violÃªncia de raÃ§a e de gÃªnero na construÃ§Ã£o da identidade.",
                        "B) questionam o pioneirismo do estado do CearÃ¡ no enfrentamento Ã  escravidÃ£o.",
                        "C) reproduzem padrÃµes estÃ©ticos em busca da valorizaÃ§Ã£o da autoestima feminina.",
                        "D) sugerem uma atmosfera onÃ­rica alinhada ao desejo de resgate da espiritualidade.",
                        "E) mimetizam, na paisagem, os corpos transformados pela violÃªncia da escravidÃ£o."
                    ],
                    correct: 0
                },
                {
                    number: 8,
                    question: "De quem Ã© esta lÃ­ngua?\nUma pequena editora brasileira, a Urutau, acaba de lanÃ§ar em Lisboa uma \"antologia antirracista de poetas estrangeiros em Portugal\", com o tÃ­tulo Volta para a tua terra. O livro denuncia as diversas formas de racismo a que os imigrantes estÃ£o sujeitos. Alguns dos poetas brasileiros antologiados queixam-se do desdÃ©m com que um grande nÃºmero de portugueses acolhe o portuguÃªs brasileiro.\nÃ uma queixa frequente.\n\"Aqui em Portugal eles dizem / â eles dizem â / que nosso portuguÃªs Ã© errado, que nÃ³s nÃ£o falamos portuguÃªs\", escreve a poetisa paulista Maria Giulia Pinheiro, para concluir: \"Se a sua linguagem, a lusitana, / ainda conserva a palavra da opressÃ£o / ela nÃ£o Ã© a mais bonita do mundo./ Ela Ã© uma das mais violentas\".",
                    image: null,
                    options: [
                        "A) Ã  dificuldade de consolidaÃ§Ã£o da literatura brasileira em outros paÃ­ses.",
                        "B) aos diferentes graus de instruÃ§Ã£o formal entre os falantes de lÃ­ngua portuguesa.",
                        "C) Ã  existÃªncia de uma lÃ­ngua ideal que alguns falantes lusitanos creem ser a falada em Portugal.",
                        "D) ao intercÃ¢mbio cultural que ocorre entre os povos dos diferentes paÃ­ses de lÃ­ngua portuguesa.",
                        "E) Ã  distÃ¢ncia territorial entre os falantes do portuguÃªs que vivem em Portugal e no Brasil."
                    ],
                    correct: 2
                },
                {
                    number: 9,
                    question: "Na Idade MÃ©dia, as notÃ­cias se propagavam com surpreendente eficÃ¡cia. Segundo uma emÃ©rita professora de Sorbonne, um cavalo era capaz de percorrer 30 quilÃ´metros por dia, mas o tempo podia se acelerar dependendo do interesse da notÃ­cia. As ordens mendicantes tinham um papel importante na disseminaÃ§Ã£o de informaÃ§Ãµes, assim como os jograis, os peregrinos e os vagabundos, porque todos eles percorriam grandes distÃ¢ncias. As cidades tambÃ©m tinham correios organizados e selos para lacrar mensagens e tentar certificar a veracidade das correspondÃªncias.\nGraÃ§as a tudo isso, a circulaÃ§Ã£o de boatos era intensa e politicamente relevante. Um exemplo clÃ¡ssico de fake news da era medieval Ã© a histÃ³ria do rei que desaparece na batalha e reaparece muito depois, idoso e transformado.",
                    image: null,
                    options: [
                        "A) velocidade de circulaÃ§Ã£o das notÃ­cias.",
                        "B) nÃ­vel de letramento da populaÃ§Ã£o marginalizada.",
                        "C) poder de censura por parte dos serviÃ§os pÃºblicos.",
                        "D) legitimidade da voz dos representantes da nobreza.",
                        "E) diversidade dos meios disponÃ­veis em uma Ã©poca histÃ³rica."
                    ],
                    correct: 4
                },
                {
                    number: 10,
                    question: "Se a interferÃªncia de contas falsas em discussÃµes polÃ­ticas nas redes sociais jÃ¡ representava um perigo para os sistemas democrÃ¡ticos, sua sofisticaÃ§Ã£o e maior semelhanÃ§a com pessoas reais tÃªm agravado o problema pelo mundo.\nO perigo cresceu porque a tecnologia e os mÃ©todos evoluÃ­ram dos robÃ´s, os \"bots\" â softwares com tarefas on-line automatizadas â, para os \"ciborgues\" ou \"trolls\", contas controladas diretamente por humanos com ajuda de um pouco de automaÃ§Ã£o.\nMas pesquisadores comeÃ§am agora a observar outros padrÃµes de comportamento: quando mensagens nÃ£o sÃ£o programadas, sua publicaÃ§Ã£o se concentra sÃ³ em horÃ¡rios de trabalho, jÃ¡ que Ã© controlada por pessoas cuja profissÃ£o Ã© exatamente essa, administrar um perfil falso durante o dia.\nOutra pista: a pobreza vocabular das mensagens publicadas por esses perfis. Um funcionÃ¡rio de uma empresa que supostamente produzia e vendia perfis falsos explica que Ã s vezes \"faltava criatividade\" para criar mensagens distintas controlando tantos perfis falsos ao mesmo tempo.",
                    image: null,
                    options: [
                        "A) controle da atuaÃ§Ã£o dos profissionais de TI.",
                        "B) desenvolvimento de tecnologias como os \"trolls\".",
                        "C) flexibilizaÃ§Ã£o dos turnos de trabalho dos controladores.",
                        "D) necessidade de regulamentaÃ§Ã£o do funcionamento dos \"bots\".",
                        "E) identificaÃ§Ã£o de padrÃµes de disseminaÃ§Ã£o de informaÃ§Ãµes inverÃ­dicas."
                    ],
                    correct: 4
                }
            ],
            matematica: [
                {
                    number: 11,
                    question: "Uma empresa produz dois tipos de sucos: laranja e maÃ§Ã£. O suco de laranja Ã© vendido a R$ 5,00 o litro e o suco de maÃ§Ã£ a R$ 7,00 o litro. Em um determinado dia, a empresa vendeu 200 litros de suco no total, arrecadando R$ 1.200,00. Quantos litros de cada tipo de suco foram vendidos?",
                    image: null,
                    options: [
                        "A) 100 litros de laranja e 100 litros de maÃ§Ã£",
                        "B) 120 litros de laranja e 80 litros de maÃ§Ã£",
                        "C) 80 litros de laranja e 120 litros de maÃ§Ã£",
                        "D) 150 litros de laranja e 50 litros de maÃ§Ã£",
                        "E) 50 litros de laranja e 150 litros de maÃ§Ã£"
                    ],
                    correct: 0
                },
                {
                    number: 12,
                    question: "Um triÃ¢ngulo retÃ¢ngulo tem catetos que medem 8 cm e 15 cm. Qual Ã© o comprimento da hipotenusa?",
                    image: null,
                    options: [
                        "A) 16 cm",
                        "B) 17 cm",
                        "C) 18 cm",
                        "D) 19 cm",
                        "E) 20 cm"
                    ],
                    correct: 1
                },
                {
                    number: 13,
                    question: "Uma progressÃ£o aritmÃ©tica tem primeiro termo igual a 5 e razÃ£o igual a 3. Qual Ã© o 10Âº termo dessa progressÃ£o?",
                    image: null,
                    options: [
                        "A) 28",
                        "B) 30",
                        "C) 32",
                        "D) 34",
                        "E) 35"
                    ],
                    correct: 2
                },
                {
                    number: 14,
                    question: "Uma loja oferece um desconto de 20% em todos os produtos. Se um cliente pagou R$ 80,00 por uma camiseta com desconto, qual era o preÃ§o original da camiseta?",
                    image: null,
                    options: [
                        "A) R$ 96,00",
                        "B) R$ 100,00",
                        "C) R$ 104,00",
                        "D) R$ 120,00",
                        "E) R$ 125,00"
                    ],
                    correct: 1
                },
                {
                    number: 15,
                    question: "Qual Ã© a Ã¡rea de um cÃ­rculo cujo raio mede 10 cm? (Use Ï = 3,14)",
                    image: null,
                    options: [
                        "A) 31,4 cmÂ²",
                        "B) 62,8 cmÂ²",
                        "C) 100 cmÂ²",
                        "D) 314 cmÂ²",
                        "E) 628 cmÂ²"
                    ],
                    correct: 3
                }
            ],
            portugues: [
                {
                    number: 16,
                    question: "Leia o trecho: 'A vida Ã© como uma caixa de chocolates, vocÃª nunca sabe o que vai encontrar.' Nessa frase, o recurso estilÃ­stico utilizado Ã©:",
                    image: null,
                    options: [
                        "A) MetÃ¡fora",
                        "B) MetonÃ­mia",
                        "C) Eufemismo",
                        "D) HipÃ©rbole",
                        "E) PersonificaÃ§Ã£o"
                    ],
                    correct: 0
                },
                {
                    number: 17,
                    question: "Assinale a alternativa em que todas as palavras estÃ£o acentuadas corretamente:",
                    image: null,
                    options: [
                        "A) HistÃ³ria, idÃ©ia, juÃ­z",
                        "B) PaÃ­ses, baÃº, saÃºde",
                        "C) LÃ­quido, Ã³rfÃ£o, pÃ´r",
                        "D) TÃªnis, avÃ´, sÃ³",
                        "E) MÃ©dico, cafÃ©, vocÃª"
                    ],
                    correct: 2
                },
                {
                    number: 18,
                    question: "Na frase 'Os alunos estudaram muito para a prova', a palavra 'muito' exerce a funÃ§Ã£o sintÃ¡tica de:",
                    image: null,
                    options: [
                        "A) Adjunto adnominal",
                        "B) Adjunto adverbial",
                        "C) Predicativo do sujeito",
                        "D) Objeto direto",
                        "E) Sujeito"
                    ],
                    correct: 1
                },
                {
                    number: 19,
                    question: "Qual das alternativas apresenta um exemplo de linguagem conotativa?",
                    image: null,
                    options: [
                        "A) A temperatura ambiente Ã© de 25 graus Celsius",
                        "B) O livro tem 200 pÃ¡ginas",
                        "C) Seu coraÃ§Ã£o Ã© de pedra",
                        "D) A reuniÃ£o comeÃ§ou Ã s 14 horas",
                        "E) O prÃ©dio tem 10 andares"
                    ],
                    correct: 2
                },
                {
                    number: 20,
                    question: "Assinale a alternativa em que o verbo estÃ¡ na voz passiva:",
                    image: null,
                    options: [
                        "A) Os alunos fizeram a prova",
                        "B) A prova foi feita pelos alunos",
                        "C) Eu compro o livro",
                        "D) Ela escreveu uma carta",
                        "E) NÃ³s estudamos matemÃ¡tica"
                    ],
                    correct: 1
                }
            ]
        };

        // VariÃ¡veis globais
        let currentSection = 'linguagens';
        let currentQuestionIndex = 0;
        let userAnswers = {};
        let startTime = Date.now();
        let timerInterval;
        let coins = parseInt(localStorage.getItem('coins')) || 0;
        let reviewData = {};

        // InicializaÃ§Ã£o
        document.addEventListener('DOMContentLoaded', () => {
            updateCoinsDisplay();
            startTimer();
            loadQuestion();
        });

        // Atualizar display de moedas
        function updateCoinsDisplay() {
            document.getElementById('coinsCount').textContent = coins;
        }

        // Iniciar timer
        function startTimer() {
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // Selecionar seÃ§Ã£o
        function selectSection(section) {
            currentSection = section;
            currentQuestionIndex = 0;
            
            // Atualizar botÃµes de seÃ§Ã£o
            document.querySelectorAll('.section-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadQuestion();
        }

        // Carregar questÃ£o
        function loadQuestion() {
            const questions = examData[currentSection];
            const question = questions[currentQuestionIndex];
            
            if (!question) {
                showConfirmDialog();
                return;
            }
            
            // Atualizar progresso
            const totalQuestions = Object.values(examData).reduce((sum, section) => sum + section.length, 0);
            const answeredQuestions = Object.keys(userAnswers).length;
            const progress = (answeredQuestions / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Construir HTML da questÃ£o
            let questionHTML = `
                <div class="question-header">
                    <div class="question-number">QuestÃ£o ${question.number}</div>
                </div>
                <div class="question-area">
                    ${question.question.replace(/\n/g, '<br>')}
                </div>
            `;
            
            if (question.image) {
                questionHTML += `<img src="${question.image}" alt="Imagem da questÃ£o" class="question-image">`;
            }
            
            questionHTML += '<div class="options-container">';
            question.options.forEach((option, index) => {
                const isSelected = userAnswers[`${currentSection}_${currentQuestionIndex}`] === index;
                questionHTML += `
                    <div class="option ${isSelected ? 'selected' : ''}" onclick="selectOption(${index})">
                        <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                        <div>${option}</div>
                    </div>
                `;
            });
            questionHTML += '</div>';
            
            document.getElementById('questionContainer').innerHTML = questionHTML;
            
            // Atualizar botÃµes de navegaÃ§Ã£o
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextBtn').textContent = 
                currentQuestionIndex === questions.length - 1 ? 'Finalizar' : 'PrÃ³xima';
        }

        // Selecionar opÃ§Ã£o
        function selectOption(optionIndex) {
            userAnswers[`${currentSection}_${currentQuestionIndex}`] = optionIndex;
            
            // Atualizar visual das opÃ§Ãµes
            document.querySelectorAll('.option').forEach((option, index) => {
                option.classList.remove('selected');
                if (index === optionIndex) {
                    option.classList.add('selected');
                }
            });
        }

        // NavegaÃ§Ã£o entre questÃµes
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function nextQuestion() {
            const questions = examData[currentSection];
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showConfirmDialog();
            }
        }

        // Mostrar diÃ¡logo de confirmaÃ§Ã£o
        function showConfirmDialog() {
            clearInterval(timerInterval);
            document.getElementById('confirmModal').style.display = 'flex';
        }

        // Preparar dados para revisÃ£o
        function prepareReviewData() {
            reviewData = {
                correct: [],
                incorrect: []
            };

            Object.keys(examData).forEach(section => {
                examData[section].forEach((question, index) => {
                    const userAnswer = userAnswers[`${section}_${index}`];
                    const isCorrect = userAnswer === question.correct;
                    
                    const reviewQuestion = {
                        ...question,
                        section: section,
                        userAnswer: userAnswer,
                        isCorrect: isCorrect
                    };

                    if (isCorrect) {
                        reviewData.correct.push(reviewQuestion);
                    } else {
                        reviewData.incorrect.push(reviewQuestion);
                    }
                });
            });

            // Atualizar contadores
            document.getElementById('correctCountTab').textContent = reviewData.correct.length;
            document.getElementById('incorrectCountTab').textContent = reviewData.incorrect.length;
        }

        // Mostrar revisÃ£o
        function showReview() {
            document.getElementById('confirmModal').style.display = 'none';
            prepareReviewData();
            showReviewTab('correct');
            document.getElementById('reviewModal').style.display = 'flex';
        }

        // Mostrar aba da revisÃ£o
        function showReviewTab(type) {
            // Atualizar abas
            document.querySelectorAll('.review-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Mostrar questÃµes
            const questions = reviewData[type];
            let questionsHTML = '';

            if (questions.length === 0) {
                questionsHTML = '<p style="text-align: center; color: rgba(255,255,255,0.7);">Nenhuma questÃ£o nesta categoria.</p>';
            } else {
                questions.forEach(question => {
                    questionsHTML += `
                        <div class="review-question">
                            <div class="review-question-header">
                                <div class="review-question-number">QuestÃ£o ${question.number}</div>
                                <div class="review-status ${question.isCorrect ? 'correct' : 'incorrect'}">
                                    ${question.isCorrect ? 'Acertou' : 'Errou'}
                                </div>
                            </div>
                            <div class="review-question-text">
                                ${question.question.replace(/\n/g, '<br>')}
                            </div>
                            <div class="review-answer user-answer">
                                <div class="review-answer-label">Sua resposta:</div>
                                <div>${question.userAnswer !== undefined ? question.options[question.userAnswer] : 'NÃ£o respondida'}</div>
                            </div>
                            ${!question.isCorrect ? `
                                <div class="review-answer correct-answer">
                                    <div class="review-answer-label">Resposta correta:</div>
                                    <div>${question.options[question.correct]}</div>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
            }

            document.getElementById('reviewQuestions').innerHTML = questionsHTML;
        }

        // Fechar revisÃ£o e finalizar
        function closeReviewAndFinish() {
            document.getElementById('reviewModal').style.display = 'none';
            finishExam();
        }

        // Fechar revisÃ£o
        function closeReview() {
            document.getElementById('reviewModal').style.display = 'none';
            document.getElementById('confirmModal').style.display = 'flex';
        }

        // Finalizar prova
        function finishExam() {
            document.getElementById('confirmModal').style.display = 'none';
            
            let correctCount = 0;
            let totalCount = 0;
            
            // Verificar respostas de todas as seÃ§Ãµes
            Object.keys(examData).forEach(section => {
                examData[section].forEach((question, index) => {
                    totalCount++;
                    const userAnswer = userAnswers[`${section}_${index}`];
                    if (userAnswer === question.correct) {
                        correctCount++;
                    }
                });
            });
            
            const percentScore = Math.round((correctCount / totalCount) * 100);
            const coinsEarned = Math.floor(correctCount * 5);
            
            // Atualizar moedas
            coins += coinsEarned;
            localStorage.setItem('coins', coins);
            updateCoinsDisplay();
            
            // Exibir resultados
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('totalCount').textContent = totalCount;
            document.getElementById('percentScore').textContent = percentScore + '%';
            document.getElementById('coinsEarned').textContent = coinsEarned;
            
            document.getElementById('resultsModal').style.display = 'flex';
        }

        // Fechar resultados
        function closeResults() {
            document.getElementById('resultsModal').style.display = 'none';
            goBack();
        }

        // Voltar para a pÃ¡gina principal
        function goBack() {
            // Salvar progresso antes de voltar
            localStorage.setItem('enem2023_progress', JSON.stringify({
                userAnswers: userAnswers,
                currentSection: currentSection,
                currentQuestionIndex: currentQuestionIndex
            }));
            
            window.location.href = 'index.html';
        }

        // Mostrar notificaÃ§Ã£o
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Carregar progresso salvo
        window.addEventListener('load', () => {
            const savedProgress = localStorage.getItem('enem2023_progress');
            if (savedProgress) {
                const progress = JSON.parse(savedProgress);
                userAnswers = progress.userAnswers || {};
                currentSection = progress.currentSection || 'linguagens';
                currentQuestionIndex = progress.currentQuestionIndex || 0;
                
                // Atualizar seÃ§Ã£o selecionada
                document.querySelectorAll('.section-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.textContent.toLowerCase().includes(currentSection)) {
                        btn.classList.add('active');
                    }
                });
                
                loadQuestion();
            }
        });
    </script>
</body>
</html>
